<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- LIST VIEW -->
    <record id="view_softy_pointagej_list" model="ir.ui.view">
        <field name="name">softy.pointagej.list</field>
        <field name="model">softy.pointagej</field>
        <field name="type">list</field>
        <field name="arch" type="xml">
            <list string="Pointages Journaliers" sample="1" multi_edit="1">
                <field name="employe_id" string="Employé"/>
                <field name="jour" string="Jour"/>
                <field name="mois" string="Mois"/>
                <field name="annee" string="Année"/>
                <field name="date_pointage" string="Date Complète"/>
                <field name="nbr_h" string="Heures"/>
                <field name="h_25" string="H sup 25%"/>
                <field name="h_50" string="H sup 50%"/>
                <field name="h_100" string="H sup 100%"/>
                <field name="total_heures" string="Total H"/>
                <field name="indemnite_ids" widget="many2many_tags" string="Indemnités"/>
            </list>
        </field>
    </record>

    <!-- FORM VIEW -->
    <record id="view_softy_pointagej_form" model="ir.ui.view">
        <field name="name">softy.pointagej.form</field>
        <field name="model">softy.pointagej</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Pointage Journalier">
                <sheet>
                    <div class="oe_title">
                        <h1><field name="lib"/></h1>
                    </div>
                    <group>
                        <group string="Employé et Date">
                            <field name="employe_id"/>
                            <field name="annee"/>
                            <field name="mois"/>
                            <field name="jour"/>
                            <field name="date_pointage" readonly="1" string="Date Calculée"/>
                        </group>
                        <group string="Heures">
                            <field name="nbr_h" string="Heures Normales"/>
                            <field name="total_heures" readonly="1" string="Total Heures"/>
                        </group>
                    </group>
                    <group string="Heures Supplémentaires">
                        <group>
                            <field name="h_25"/>
                            <field name="h_50"/>
                            <field name="h_100"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Affiliations &amp; Indemnités" name="affiliations_indemnites">
                            <group>
                                <group string="Affiliations (depuis l'employé)">
                                    <field name="affiliation_ids" nolabel="1" readonly="1">
                                        <list>
                                            <field name="type_aff"/>
                                            <field name="n_aff"/>
                                            <field name="taux" widget="percentage"/>
                                            <field name="date_debut"/>
                                            <field name="date_fin"/>
                                        </list>
                                    </field>
                                </group>
                                <group string="Indemnités">
                                    <field name="indemnite_ids" nolabel="1" widget="many2many_tags"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- KANBAN VIEW -->
    <record id="view_softy_pointagej_kanban" model="ir.ui.view">
        <field name="name">softy.pointagej.kanban</field>
        <field name="model">softy.pointagej</field>
        <field name="type">kanban</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_small_column">
                <field name="lib"/>
                <field name="employe_id"/>
                <field name="jour"/>
                <field name="mois"/>
                <field name="annee"/>
                <field name="nbr_h"/>
                <field name="h_25"/>
                <field name="h_50"/>
                <field name="h_100"/>
                <templates>
                    <t t-name="card">
                        <div class="o_kanban_card o_kanban_card_hover">
                            <div class="o_kanban_card_header">
                                <strong><field name="lib"/></strong>
                            </div>
                            <div class="o_kanban_card_content">
                                <div class="mb-1 text-muted small">
                                    <i class="fa fa-user me-1"/><field name="employe_id"/>
                                </div>
                                <div class="text-muted small">
                                    <i class="fa fa-calendar me-1"/> <field name="jour"/>/<field name="mois"/>/<field name="annee"/>
                                </div>
                                <div class="text-muted small">
                                    <i class="fa fa-clock-o me-1"/> Heures: <field name="nbr_h"/>
                                </div>
                                <div class="text-muted small">
                                    <t t-if="record.h_25.value or record.h_50.value or record.h_100.value">
                                        <i class="fa fa-plus me-1"/> Heures sup.: 
                                        <t t-if="record.h_25.value">
                                            <span t-esc="record.h_25.value"/>h (25%) 
                                        </t>
                                        <t t-if="record.h_50.value">
                                            <span t-esc="record.h_50.value"/>h (50%) 
                                        </t>
                                        <t t-if="record.h_100.value">
                                            <span t-esc="record.h_100.value"/>h (100%)
                                        </t>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- ACTION -->
    <record id="action_softy_pointagej" model="ir.actions.act_window">
        <field name="name">Pointages Journaliers</field>
        <field name="res_model">softy.pointagej</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Créez votre premier pointage journalier
            </p>
            <p>
                Saisissez les heures et heures supplémentaires quotidiennes.
            </p>
        </field>
    </record>

    <!-- MENUS -->
    <menuitem id="menu_softy_pointagej"
              name="Pointages Journaliers"
              parent="menu_softy_pointage"
              action="action_softy_pointagej"
              sequence="20"/>

</odoo>